#!/usr/bin/env python
# -*- mode: python -*-

"""Execute data workflows defined in workflow.yaml files
"""

import argparse
import sys
import os
import ConfigParser

from workflow.commands import execute, clean

# setup the option parser
parser = argparse.ArgumentParser(
    description=__doc__,
)
parser.add_argument(
    '--force', 
    action="store_true",
    help="Rerun entire workflow, regardless of task state.",
)
parser.add_argument(
    '-c', '--clean', 
    action="store_true",
    help="Confirm before removing all `creates` targets defined in workflow.",
)
parser.add_argument(
    '--force-clean', 
    action="store_true",
    help="Remove all `creates` targets defined in workflow without confirmation.",
)
args = parser.parse_args()

if args.clean or args.force_clean:
    clean(force=args.force_clean)
else:
    execute(force=args.force)
